# AI-Powered Visual Novel Game

This project is an interactive, AI-driven storytelling experience designed as a visual novel. It leverages the power of Azure OpenAI's language models for dynamic storytelling and DALL-E for generating background images that change according to the narrative's progress.

## Overview

The application creates an engaging and immersive children's storytelling experience where the user interacts with an AI storyteller. Here's what it does:

*   **Dynamic Storytelling:** The AI crafts stories in real-time, engaging with the user and letting them influence the direction of the narrative.
*   **AI-Generated Visuals:** The background image dynamically changes based on the story's content, generated by the DALL-E image generation model.
*   **Real-Time Interaction:** Utilizes SocketIO for real-time communication between the client and server, allowing for smooth and fluid interactions.
*   **Responsive UI:** Includes a loading indicator and disables input while waiting for the AI's responses, ensuring a user-friendly experience.
* **Character**: Includes a character that will always appear in the image container.
* **Chat History**: Manages the chat history, to generate better answers.

## Technologies Used

*   **Python:** The core backend logic.
*   **Flask:** A microframework for building the web application.
*   **Flask-SocketIO:** Real-time communication between client and server.
*   **Azure OpenAI API:** For dynamic text generation and image prompt generation.
* **Azure OpenAI Image API:** For image generation.
*   **HTML, CSS, JavaScript:** The frontend for the user interface.
*   **DALL-E:** For generating the background images.
* **python-dotenv**: For storing the environment variables.

## Project Structure
proyecto/ ├── app.py # Main Flask application ├── requirements.txt # Project dependencies ├── .env # Environment variables ├── static/ │ ├── css/ │ │ └── style.css # Styling for the chatbot │ ├── js/ │ │ └── script.js # JavaScript for the chatbot interaction │ └── img/ │ ├── book-cover.png # Default background image │ └── character.png # Default character image └── templates/ └── index.html # Main HTML page └── utils/ ├── chat_manager.py # Manages the conversation history └── openai_utils.py # Functions for interacting with OpenAI APIs

## Prerequisites

*   **Python 3.8+** installed on your system.
*   **Azure OpenAI Account:** You need to have access to an Azure OpenAI Service instance with the following capabilities:
    *   A text generation model deployed (e.g., `gpt-4o`).
    *   An image generation model deployed (e.g., `dall-e-3`).
*   **Environment Variables:** You'll need to set up environment variables for your OpenAI API keys and endpoints.

## Deployment Instructions

1.  **Clone the Repository:**
    ```bash
    git clone <your-repository-url>
    cd proyecto
    ```

2.  **Install Dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Set Up Environment Variables:**
    *   Create a `.env` file in the `proyecto/` directory.
    *   Add the following variables with your Azure OpenAI details:

        ```properties
        SECRET_KEY="<your-secret-key>" # Use a strong secret
        OPENAI_API_KEY="<your-openai-api-key>"
        OPENAI_API_VERSION="<your-openai-api-version>"
        AZURE_OPENAI_ENDPOINT="<your-openai-endpoint>"
        OPENAI_DEPLOYMENT_NAME="<your-openai-deployment-name>" # For text generation
        OPENAI_IMAGE_API_KEY="<your-openai-image-api-key>"
        OPENAI_IMAGE_API_VERSION="<your-openai-image-api-version>"
        AZURE_OPENAI_IMAGE_ENDPOINT="<your-openai-image-endpoint>"
        OPENAI_IMAGE_DEPLOYMENT_NAME="<your-openai-image-deployment-name>" # For image generation (DALL-E)
        ```
        *   Replace the `<placeholders>` with your credentials.

4. **Add default images:**
    * Put the `book-cover.png` and `character.png` images in the `proyecto/static/img/` folder.

5.  **Run the Application:**
    ```bash
    python app.py
    ```

6.  **Access the Application:**
    *   Open your web browser and go to `http://127.0.0.1:5000/`.

## Usage

1.  The initial page will display the default background image and a character.
2.  Enter a message in the input field and press "Enter" or click "Send".
3.  The AI will generate a response and update the chat log.
4.  The background image will change dynamically based on the story, and the input and send button will be locked while the response is processed.

## Further Development

* **Conversation Management**: You can improve the chat manager to manage longer conversations.
* **More characters**: You can add more characters to the visual novel.
* **Advanced Prompt Engineering**: You can create more complex prompts to improve the image results.
* **Error Handling**: You can improve the error handling in different areas.

